<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù…Ø­Ø§ÙƒÙŠ Ø³ÙˆÙ†Ø§ØªØ§ 2011 - Ù†Ø¸Ø§Ù… ÙØ­Øµ Ù…ØªÙƒØ§Ù…Ù„</title>
    <style>
        :root { --main-red: #e74c3c; --panel-gray: #ecf0f1; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { background-color: #2c3e50; font-family: sans-serif; display: flex; height: 100vh; overflow: hidden; }

        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© */
        .sidebar { width: 240px; background: white; border-left: 2px solid #ddd; z-index: 100; }
        .sidebar-header { padding: 15px; background: var(--main-red); color: white; font-weight: bold; text-align: center; }
        .tool-item { padding: 15px; border-bottom: 1px solid #eee; cursor: pointer; transition: 0.3s; display: flex; align-items: center; gap: 10px; }
        .tool-item:hover { background: #f9f9f9; color: var(--main-red); }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø³ÙŠØ§Ø±Ø© */
        .stage { flex-grow: 1; position: relative; background: radial-gradient(circle, #555, #111); overflow: hidden; display: flex; justify-content: center; align-items: center; }
        .car-image { width: 85%; max-width: 900px; filter: drop-shadow(0 20px 50px black); transition: 0.5s; }

        /* Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© */
        .floating-window {
            position: absolute; background: var(--panel-gray); border-radius: 15px; 
            box-shadow: 0 15px 40px rgba(0,0,0,0.6); padding: 15px; z-index: 200; 
            display: none; cursor: move; border: 2px solid #bdc3c7;
        }
        .win-header { display: flex; justify-content: space-between; font-weight: bold; border-bottom: 1px solid #ccc; margin-bottom: 10px; padding-bottom: 5px; }
        .close-btn { color: red; cursor: pointer; }

        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ù„ØªÙŠÙ…ÙŠØªØ± */
        .multimeter-ui { background: #f1c40f; padding: 15px; border-radius: 10px; border: 4px solid #f39c12; width: 180px; text-align: center; }
        .m-display { background: #95a5a6; color: #111; font-family: 'Courier New', monospace; font-size: 24px; padding: 5px; border-radius: 5px; margin-bottom: 10px; box-shadow: inset 0 0 5px black; }
        .probe { width: 15px; height: 15px; border-radius: 50%; display: inline-block; }

        /* Ù„ÙˆØ­Ø© Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª */
        .dash-ui { background: #000; padding: 15px; border-radius: 15px; width: 320px; text-align: center; }
        .gauge { width: 100px; height: 100px; border: 3px solid #333; border-radius: 50%; position: relative; display: inline-flex; justify-content: center; align-items: center; }
        .needle { position: absolute; width: 2px; height: 45px; background: red; bottom: 50%; transform-origin: bottom center; transform: rotate(-90deg); }
    </style>
</head>
<body>

    <aside class="sidebar">
        <div class="sidebar-header">Ø³ÙˆÙ†Ø§ØªØ§ 2011 - ÙØ­Øµ</div>
        <div class="tool-item" onclick="showWin('dashWin')">ğŸ”‘ Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©</div>
        <div class="tool-item" onclick="showWin('multiWin')">ğŸ“Ÿ Ù…Ù‚ÙŠØ§Ø³ Ù…ØªØ¹Ø¯Ø¯ (Multimeter)</div>
        <div class="tool-item">ğŸ”Œ Ù…Ø®Ø·Ø· Ø§Ù„Ø£Ø³Ù„Ø§Ùƒ</div>
    </aside>

    <main class="stage">
        <img src="https://images.sayarti.com/hyundai/sonata/2011/gallery/hyundai_sonata_2011_1.jpg" class="car-image" alt="Sonata 2011">

        <div id="dashWin" class="floating-window" style="top: 20px; left: 20px;">
            <div class="win-header"><span>Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª</span><span class="close-btn" onclick="showWin('dashWin')">âœ–</span></div>
            <div class="dash-ui">
                <div class="gauge"><div class="needle" id="needle"></div></div>
                <button id="startBtn" style="width:100%; margin-top:10px; padding:8px; cursor:pointer; background:green; color:white; border:none; border-radius:5px;">START</button>
                <input type="range" id="pedal" min="0" max="8000" value="0" style="width:100%; margin-top:10px;">
                <p style="color:cyan; margin-top:5px;">RPM: <span id="rpmVal">0</span></p>
            </div>
        </div>

        <div id="multiWin" class="floating-window" style="top: 50px; right: 50px;">
            <div class="win-header"><span>Multimeter</span><span class="close-btn" onclick="showWin('multiWin')">âœ–</span></div>
            <div class="multimeter-ui">
                <div class="m-display" id="mDisplay">0.00 V</div>
                <div style="font-size:12px; font-weight:bold;">HYUNDAI DIAGNOSTIC</div>
                <div style="margin-top:10px;">
                    <span class="probe" style="background:red;"></span> 
                    <span class="probe" style="background:black;"></span>
                </div>
            </div>
        </div>
    </main>

    <script>
        let audioCtx, osc, gain;
        let running = false;

        // ÙˆØ¸ÙŠÙØ© Ø§Ù„Ù†ÙˆØ§ÙØ°
        function showWin(id) {
            const w = document.getElementById(id);
            w.style.display = (w.style.display === 'block') ? 'none' : 'block';
        }

        // ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù†ÙˆØ§ÙØ°
        document.querySelectorAll('.floating-window').forEach(win => {
            win.onmousedown = (e) => {
                if(e.target.tagName === 'INPUT' || e.target.tagName === 'BUTTON') return;
                let ox = e.clientX - win.offsetLeft;
                let oy = e.clientY - win.offsetTop;
                document.onmousemove = (ev) => {
                    win.style.left = ev.clientX - ox + 'px';
                    win.style.top = ev.clientY - oy + 'px';
                };
            };
            document.onmouseup = () => document.onmousemove = null;
        });

        // Ø§Ù„ØµÙˆØª ÙˆØ§Ù„Ù…Ø­Ø±Ùƒ
        function initSound() {
            audioCtx = new AudioContext();
            osc = audioCtx.createOscillator();
            gain = audioCtx.createGain();
            osc.type = 'sawtooth';
            osc.frequency.value = 50;
            gain.gain.value = 0;
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start();
        }

        const startBtn = document.getElementById('startBtn');
        startBtn.onclick = () => {
            if(!audioCtx) initSound();
            if(!running) {
                gain.gain.setTargetAtTime(0.1, audioCtx.currentTime, 0.1);
                startBtn.innerText = "STOP"; startBtn.style.background = "red";
                running = true;
            } else {
                gain.gain.setTargetAtTime(0, audioCtx.currentTime, 0.1);
                startBtn.innerText = "START"; startBtn.style.background = "green";
                running = false;
                document.getElementById('needle').style.transform = `rotate(-90deg)`;
            }
        };

        const pedal = document.getElementById('pedal');
        pedal.oninput = (e) => {
            if(!running) { e.target.value = 0; return; }
            let v = e.target.value;
            document.getElementById('rpmVal').innerText = v;
            document.getElementById('needle').style.transform = `rotate(${(v/8000)*180-90}deg)`;
            osc.frequency.setTargetAtTime(50 + (v/30), audioCtx.currentTime, 0.05);
            
            // ØªØ­Ø¯ÙŠØ« Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ù„ØªÙŠÙ…ÙŠØªØ± (Ù…Ø­Ø§ÙƒØ§Ø© Ø¬Ù‡Ø¯ Ø§Ù„Ø­Ø³Ø§Ø³)
            let voltage = (v / 8000 * 4) + 0.5; 
            document.getElementById('mDisplay').innerText = voltage.toFixed(2) + " V";
        };
    </script>
</body>
</html>
